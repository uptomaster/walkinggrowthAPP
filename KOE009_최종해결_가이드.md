# KOE009 오류 최종 해결 가이드

## 🔴 문제 상황

모바일 앱에서 카카오 로그인 시 다음 오류 발생:
- **KOE009**: 등록되지 않은 플랫폼에서 액세스 토큰 요청
- JavaScript SDK 도메인: `https://localhost`

## ✅ 해결 방법 (완료됨)

### 모바일 앱에서도 카카오 로그인 사용 가능하도록 수정

모바일 앱에서도 카카오 JavaScript SDK를 사용하도록 코드를 수정했습니다.

**변경 사항:**
1. 모바일 앱에서도 카카오 SDK 로드 및 초기화
2. 모바일 앱에서도 카카오 로그인 사용 가능
3. 카카오 개발자 콘솔의 JavaScript 키에 `http://localhost` 도메인 추가 필요

**결과:**
- 모바일 앱에서도 카카오 로그인 사용 가능
- 웹 브라우저에서도 정상 작동

---

## 📝 참고: 이전 해결 방법 (더 이상 필요 없음)

### 방법 1: JavaScript 키에 localhost 도메인 추가 (더 이상 필요 없음)

1. **카카오 개발자 콘솔 접속**
   - [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
   - **내 애플리케이션** → **WalkStory** 앱 선택

2. **JavaScript 키 설정 페이지로 이동**
   - 왼쪽 사이드바에서 **"앱"** → **"플랫폼 키"** 클릭
   - **"JavaScript 키"** 탭 선택 (또는 이미 선택되어 있을 수 있음)

3. **JavaScript SDK 도메인에 localhost 추가**
   - **"JavaScript SDK 도메인"** 섹션 찾기
   - 현재 등록된 도메인: `https://walkinggrowth-app.vercel.app`
   - **"+"** 버튼 클릭하여 새 도메인 추가
   - 다음 도메인들을 추가:
     ```
     http://localhost
     https://localhost
     ```
   - 또는 하나만 추가:
     ```
     http://localhost
     ```

4. **저장 버튼 클릭**

### 방법 2: 모바일 앱에서 JavaScript SDK 차단 (근본적 해결책)

모바일 앱에서는 JavaScript SDK를 사용하지 않도록 코드 수정이 필요합니다.

---

## 📝 확인 사항

### 네이티브 앱키 등록 확인

1. **네이티브 앱키 페이지 확인**
   - **"앱"** → **"플랫폼 키"** → **"네이티브 앱키"** 탭
   - Android 플랫폼이 등록되어 있는지 확인:
     - 패키지 이름: `com.walkstory.app`
     - 키 해시: `61F95D5037CA3D777992B6EAD6625D5C9F2E048` (콜론 제거 형식)

### JavaScript 키 도메인 확인

1. **JavaScript 키 페이지 확인**
   - **"앱"** → **"플랫폼 키"** → **"JavaScript 키"** 탭
   - 등록된 도메인:
     - `https://walkinggrowth-app.vercel.app` (프로덕션)
     - `http://localhost` (개발/모바일 앱용) ← **추가 필요!**

---

## 🎯 최종 체크리스트

- [ ] 네이티브 앱키에 Android 플랫폼 등록 완료
  - 패키지 이름: `com.walkstory.app`
  - 키 해시: `61F95D5037CA3D777992B6EAD6625D5C9F2E048`
- [ ] JavaScript 키에 `http://localhost` 도메인 추가 완료
- [ ] 저장 버튼 클릭 완료
- [ ] 모바일 앱에서 카카오 로그인 테스트

---

## 💡 참고사항

- **localhost 도메인 추가**: 모바일 앱의 WebView에서 `localhost`를 도메인으로 인식하므로, JavaScript 키 설정에 추가해야 합니다.
- **보안**: `localhost`는 개발/테스트 환경에서만 사용되므로, 프로덕션에서는 문제가 없습니다.
- **나중에**: 모바일 앱에서는 네이티브 카카오 SDK를 사용하는 것이 더 안정적입니다. 현재는 JavaScript SDK를 사용하고 있으므로 `localhost` 도메인을 추가하는 것이 가장 빠른 해결책입니다.

---

## 🆘 여전히 해결되지 않으면

1. **브라우저 캐시 삭제**
   - 카카오 개발자 콘솔에서 설정 변경 후 브라우저 새로고침 (Ctrl+F5)

2. **모바일 앱 재설치**
   - APK를 삭제하고 다시 설치

3. **카카오 고객센터 문의**
   - 카카오 개발자 콘솔 하단의 "문의하기" 링크 클릭
