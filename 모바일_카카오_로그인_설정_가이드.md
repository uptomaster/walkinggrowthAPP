# 모바일 앱 카카오 로그인 설정 가이드

## ✅ 완료된 작업

1. **서버 사이드 카카오 OAuth 구현**
   - `/api/auth/kakao-oauth/start` - 카카오 OAuth 시작
   - `/api/auth/kakao-callback` - 카카오 OAuth 콜백 처리
   - 모바일 앱에서 카카오톡 앱으로 로그인 후 앱으로 돌아오기

2. **Android 커스텀 URL 스킴 설정**
   - `walkstory://oauth` URL 스킴 추가
   - AndroidManifest.xml에 intent-filter 추가

3. **프론트엔드 로직 수정**
   - 모바일 앱에서는 서버 사이드 OAuth 사용
   - 웹 브라우저에서는 JavaScript SDK 사용

## 📝 카카오 개발자 콘솔 설정 필요

### 1. 리다이렉트 URI 등록

1. [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
2. **내 애플리케이션** → **WalkStory** 앱 선택
3. **제품 설정** → **카카오 로그인** 클릭
4. **Redirect URI 등록** 섹션에서 다음 URI 추가:
   ```
   https://walkinggrowth-app.vercel.app/api/auth/kakao-oauth/callback
   ```
   
   ⚠️ **중요**: 기존에 등록한 `/api/auth/kakao-callback`이 있다면 삭제하고 위 URI로 변경하세요!

### 2. 클라이언트 시크릿 확인 (선택사항)

1. **앱 설정** → **플랫폼 키** → **클라이언트 시크릿** 확인
2. Vercel 환경 변수에 추가 (선택사항):
   - `KAKAO_CLIENT_SECRET`: 클라이언트 시크릿 값

## 🔧 Vercel 환경 변수 설정 (선택사항)

Vercel 대시보드에서 다음 환경 변수를 설정할 수 있습니다:

- `KAKAO_REST_API_KEY`: `1f0b84df4d86cb3d668020799bcc7473` (기본값 사용 중)
- `KAKAO_CLIENT_SECRET`: 클라이언트 시크릿 (선택사항)
- `KAKAO_REDIRECT_URI`: `https://walkinggrowth-app.vercel.app/api/auth/kakao-oauth/callback` (기본값 사용 중)

## 🚀 작동 방식

1. **모바일 앱에서 카카오 로그인 버튼 클릭**
   - 서버에서 카카오 OAuth URL 받기
   - 카카오톡 앱 또는 브라우저로 열기

2. **카카오 인증 완료**
   - 카카오에서 인증 후 리다이렉트
   - 서버에서 인증 코드로 액세스 토큰 교환
   - 사용자 정보 조회 및 로그인 처리

3. **앱으로 돌아오기**
   - `walkstory://oauth?token=...` URL 스킴으로 앱으로 돌아옴
   - 앱에서 토큰 저장 및 로그인 완료

## ⚠️ 중요: 리다이렉트 URI 변경 필요!

**기존 URI (삭제 필요):**
```
https://walkinggrowth-app.vercel.app/api/auth/kakao-callback
```

**새 URI (등록 필요):**
```
https://walkinggrowth-app.vercel.app/api/auth/kakao-oauth/callback
```

카카오 개발자 콘솔에서 기존 URI를 삭제하고 새 URI를 등록하세요!

## ⚠️ 중요 사항

- **리다이렉트 URI 등록 필수**: 카카오 개발자 콘솔에 반드시 등록해야 합니다
- **네이티브 앱키 등록 확인**: Android 플랫폼이 등록되어 있어야 합니다
- **테스트**: APK를 재빌드하고 테스트해야 합니다

## 🎯 다음 단계

1. 카카오 개발자 콘솔에 리다이렉트 URI 등록
2. APK 재빌드
3. 모바일 앱에서 카카오 로그인 테스트
